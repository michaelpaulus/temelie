{
  "definitionName": "uspUpdateEmployeeHireInfo",
  "schemaName": "HumanResources",
  "definition": "CREATE PROCEDURE [HumanResources].[uspUpdateEmployeeHireInfo]\n    @BusinessEntityID [int], \n    @JobTitle [nvarchar](50), \n    @HireDate [datetime], \n    @RateChangeDate [datetime], \n    @Rate [money], \n    @PayFrequency [tinyint], \n    @CurrentFlag [dbo].[Flag] \nWITH EXECUTE AS CALLER\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    BEGIN TRY\n        BEGIN TRANSACTION;\n\n        UPDATE [HumanResources].[Employee] \n        SET [JobTitle] = @JobTitle \n            ,[HireDate] = @HireDate \n            ,[CurrentFlag] = @CurrentFlag \n        WHERE [BusinessEntityID] = @BusinessEntityID;\n\n        INSERT INTO [HumanResources].[EmployeePayHistory] \n            ([BusinessEntityID]\n            ,[RateChangeDate]\n            ,[Rate]\n            ,[PayFrequency]) \n        VALUES (@BusinessEntityID, @RateChangeDate, @Rate, @PayFrequency);\n\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        -- Rollback any active or uncommittable transactions before\n        -- inserting information in the ErrorLog\n        IF @@TRANCOUNT > 0\n        BEGIN\n            ROLLBACK TRANSACTION;\n        END\n\n        EXECUTE [dbo].[uspLogError];\n    END CATCH;\nEND;",
  "xType": "P",
  "type": "PROCEDURE"
}