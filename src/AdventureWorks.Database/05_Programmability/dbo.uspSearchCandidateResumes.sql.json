{
  "definitionName": "uspSearchCandidateResumes",
  "schemaName": "dbo",
  "definition": "--A stored procedure which demonstrates integrated full text search\n\nCREATE PROCEDURE [dbo].[uspSearchCandidateResumes]\n    @searchString [nvarchar](1000),   \n    @useInflectional [bit]=0,\n    @useThesaurus [bit]=0,\n    @language[int]=0\n\n\nWITH EXECUTE AS CALLER\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n      DECLARE @string nvarchar(1050)\n      --setting the lcid to the default instance LCID if needed\n      IF @language = NULL OR @language = 0 \n      BEGIN \n            SELECT @language =CONVERT(int, serverproperty('lcid'))  \n      END\n      \n\n            --FREETEXTTABLE case as inflectional and Thesaurus were required\n      IF @useThesaurus = 1 AND @useInflectional = 1  \n        BEGIN\n                  SELECT FT_TBL.[JobCandidateID], KEY_TBL.[RANK] FROM [HumanResources].[JobCandidate] AS FT_TBL \n                        INNER JOIN FREETEXTTABLE([HumanResources].[JobCandidate],*, @searchString,LANGUAGE @language) AS KEY_TBL\n                   ON  FT_TBL.[JobCandidateID] =KEY_TBL.[KEY]\n            END\n\n      ELSE IF @useThesaurus = 1\n            BEGIN\n                  SELECT @string ='FORMSOF(THESAURUS,\u0022'+@searchString +'\u0022'+')'      \n                  SELECT FT_TBL.[JobCandidateID], KEY_TBL.[RANK] FROM [HumanResources].[JobCandidate] AS FT_TBL \n                        INNER JOIN CONTAINSTABLE([HumanResources].[JobCandidate],*, @string,LANGUAGE @language) AS KEY_TBL\n                   ON  FT_TBL.[JobCandidateID] =KEY_TBL.[KEY]\n        END\n\n      ELSE IF @useInflectional = 1\n            BEGIN\n                  SELECT @string ='FORMSOF(INFLECTIONAL,\u0022'+@searchString +'\u0022'+')'\n                  SELECT FT_TBL.[JobCandidateID], KEY_TBL.[RANK] FROM [HumanResources].[JobCandidate] AS FT_TBL \n                        INNER JOIN CONTAINSTABLE([HumanResources].[JobCandidate],*, @string,LANGUAGE @language) AS KEY_TBL\n                   ON  FT_TBL.[JobCandidateID] =KEY_TBL.[KEY]\n        END\n  \n      ELSE --base case, plain CONTAINSTABLE\n            BEGIN\n                  SELECT @string='\u0022'+@searchString +'\u0022'\n                  SELECT FT_TBL.[JobCandidateID],KEY_TBL.[RANK] FROM [HumanResources].[JobCandidate] AS FT_TBL \n                        INNER JOIN CONTAINSTABLE([HumanResources].[JobCandidate],*,@string,LANGUAGE @language) AS KEY_TBL\n                   ON  FT_TBL.[JobCandidateID] =KEY_TBL.[KEY]\n            END\n\nEND;",
  "xType": "P",
  "type": "PROCEDURE"
}