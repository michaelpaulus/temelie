{
  "triggerName": "uWorkOrder",
  "schemaName": "Production",
  "definition": "CREATE TRIGGER [Production].[uWorkOrder]\n    ON [Production].[WorkOrder]\n    AFTER UPDATE\n    AS BEGIN\n           DECLARE @Count AS INT;\n           SET @Count = @@ROWCOUNT;\n           IF @Count = 0\n               RETURN;\n           SET NOCOUNT ON;\n           BEGIN TRY\n               IF UPDATE ([ProductID]) OR UPDATE ([OrderQty])\n                   BEGIN\n                       INSERT INTO [Production].[TransactionHistory] ([ProductID], [ReferenceOrderID], [TransactionType], [TransactionDate], [Quantity])\n                       SELECT\n                           inserted.[ProductID],\n                           inserted.[WorkOrderID],\n                           'W',\n                           GETDATE(),\n                           inserted.[OrderQty]\n                       FROM  \n                           inserted;\n                   END\n           END TRY\n           BEGIN CATCH\n               EXECUTE [dbo].[uspPrintError] ;\n               IF @@TRANCOUNT > 0\n                   BEGIN\n                       ROLLBACK;\n                   END\n               EXECUTE [dbo].[uspLogError] ;\n           END CATCH\n       END",
  "tableName": "WorkOrder"
}