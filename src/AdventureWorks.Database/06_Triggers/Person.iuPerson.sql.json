{
  "triggerName": "iuPerson",
  "schemaName": "Person",
  "definition": "CREATE TRIGGER [Person].[iuPerson] ON [Person].[Person] \nAFTER INSERT, UPDATE NOT FOR REPLICATION AS \nBEGIN\n    DECLARE @Count int;\n\n    SET @Count = @@ROWCOUNT;\n    IF @Count = 0 \n        RETURN;\n\n    SET NOCOUNT ON;\n\n    IF UPDATE([BusinessEntityID]) OR UPDATE([Demographics]) \n    BEGIN\n        UPDATE [Person].[Person] \n        SET [Person].[Person].[Demographics] = N'<IndividualSurvey xmlns=\u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022> \n            <TotalPurchaseYTD>0.00</TotalPurchaseYTD> \n            </IndividualSurvey>' \n        FROM inserted \n        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] \n            AND inserted.[Demographics] IS NULL;\n        \n        UPDATE [Person].[Person] \n        SET [Demographics].modify(N'declare default element namespace \u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022; \n            insert <TotalPurchaseYTD>0.00</TotalPurchaseYTD> \n            as first \n            into (/IndividualSurvey)[1]') \n        FROM inserted \n        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] \n            AND inserted.[Demographics] IS NOT NULL \n            AND inserted.[Demographics].exist(N'declare default element namespace \n                \u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022; \n                /IndividualSurvey/TotalPurchaseYTD') <> 1;\n    END;\nEND;",
  "tableName": "Person"
}