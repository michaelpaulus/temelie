{
  "triggerName": "dVendor",
  "schemaName": "Purchasing",
  "definition": "CREATE TRIGGER [Purchasing].[dVendor]\n    ON [Purchasing].[Vendor]\n    INSTEAD OF DELETE\n    NOT FOR REPLICATION\n    AS BEGIN\n           DECLARE @Count AS INT;\n           SET @Count = @@ROWCOUNT;\n           IF @Count = 0\n               RETURN;\n           SET NOCOUNT ON;\n           BEGIN TRY\n               DECLARE @DeleteCount AS INT;\n               SELECT\n                   @DeleteCount = COUNT(*)\n               FROM  \n                   deleted;\n               IF @DeleteCount > 0\n                   BEGIN\n                       RAISERROR (N'Vendors cannot be deleted. They can only be marked as not active.', 10, 1);\n                       IF @@TRANCOUNT > 0\n                           BEGIN\n                               ROLLBACK;\n                           END\n                   END\n           END TRY\n           BEGIN CATCH\n               EXECUTE [dbo].[uspPrintError] ;\n               IF @@TRANCOUNT > 0\n                   BEGIN\n                       ROLLBACK;\n                   END\n               EXECUTE [dbo].[uspLogError] ;\n           END CATCH\n       END",
  "tableName": "Vendor"
}